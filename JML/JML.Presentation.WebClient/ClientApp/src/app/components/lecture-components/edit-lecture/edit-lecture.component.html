<h2 class="app-color">Редактирование материала</h2>

<div *ngIf="lecture; else loading">
  <div class="form-container">
    <div class="form-group">
      <label>Ключевые слова:</label>
      <tag-input [(ngModel)]="tags"
                 [addOnBlur]="true"
                 [clearOnBlur]="true"
                 [trimTags]="true"
                 [placeholder]="'Введите слово ...'"
                 [secondaryPlaceholder]="'Введите слово ...'">
        <tag-input-dropdown [autocompleteItems]="autoCompleteTags"></tag-input-dropdown>
      </tag-input>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()">
      <div class="form-group" [ngClass]="{'border-danger': form.get('title').touched && form.get('title').invalid}">
        <label for="title">Название:</label>
        <input id="title" type="text" class="form-control" formControlName="title">
        <div class="text-danger" *ngIf="form.get('title').touched && form.get('title').invalid">
          <small *ngIf="form.get('title').errors.required">
            Введите название
          </small>
        </div>
      </div>

      <div class="form-group" [ngClass]="{'border-danger': form.get('url').touched && form.get('url').invalid}">
        <label for="url">URL-адрес:</label>
        <input id="url" type="text" class="form-control" formControlName="url">
        <div class="text-danger" *ngIf="form.get('url').touched && form.get('url').invalid">
          <small *ngIf="form.get('url').errors.required">
            Введите URL
          </small>
        </div>
      </div>

      <div class="form-group">
        <label>Превью:</label>
        <quill-editor formControlName="preview"></quill-editor>
      </div>

      <div class="form-group">
        <label>Метериал:</label>
        <quill-editor formControlName="text"></quill-editor>
      </div>

      <div class="form-group">
        <button class="btn btn-danger mr-3" [routerLink]="['/lecture', lecture.url]" [disabled]="submitted">Отмена</button>
        <button type="submit" class="btn btn-success" [disabled]="form.invalid || submitted">Обновить материал</button>
      </div>
    </form>
  </div>
</div>
<ng-template #loading>
  <p class="text-center">Загрузка...</p>
</ng-template>

